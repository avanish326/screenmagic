{
  "modifiedOn": "2024-05-13T14:25:06.611Z",
  "name": "Go to My Inbox and Verify the messages and start the conversation with agent $agent $whatsapp $sfagent",
  "id": "46076",
  "type": 3,
  "createdOn": "2024-05-13T14:25:06.611Z",
  "content": {
    "isSystemKeyword": false,
    "title": "Go to My Inbox and Verify the messages and start the conversation with agent $agent $whatsapp $sfagent",
    "parameters": [
      {
        "parameterId": "agent_",
        "entityTypeId": "agent",
        "suffix": ""
      },
      {
        "parameterId": "whatsapp_",
        "entityTypeId": "whatsapp",
        "suffix": ""
      },
      {
        "parameterId": "sfagent_",
        "entityTypeId": "sfagent",
        "suffix": ""
      }
    ],
    "steps": [
      {
        "commented": false,
        "action": "_selectBrowser",
        "stepParameters": [],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_link(\"SMS-Magic Converse\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "15000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_image(\"smagicinteract__globalNavConverseDeskB\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"conversationListView\", _near(_span(\"Search Record\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"My Inbox\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"All\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "2000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"slds-float_left senderName\", _near(_button(\"All\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "11000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_isVisible",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"Click here\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Is_False"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "4000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"You are now connected with \"+$agentnameCheck+\". Please continue the conversation.\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Equals",
        "secondaryParam": {
          "isCustomParameter": true,
          "customValue": "\"You are now connected with \"+$agentnameCheck+\". Please continue the conversation.\""
        }
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textarea(\"messageBody\")"
          },
          {
            "parameterId": "sfagent_",
            "attributeId": "attr_01693488220472"
          }
        ],
        "stepType": "Action",
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "2000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"Send\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"close\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "POST"
          },
          {
            "isCustomParameter": true,
            "customValue": "$incomingWAURL"
          }
        ],
        "stepType": "REST",
        "isRawScript": true,
        "rawScript": "var $request_06hjCoSG9W \u003d new RESTRequest();\r\n$request_06hjCoSG9W.setURL($incomingWAURL);\r\n$request_06hjCoSG9W.setHeader(\"Content-Type\", \"application/json\");\r\nvar sanitizedBody \u003d eval(\"(\"+\"{\" + \"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"ProfileName\\\":\\\"abc\\\",\" + \"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"WaId\\\":\\\"91750878281\\\",\" + \"   \\\"SmsStatus\\\":\\\"received\\\",\" + \"   \\\"Body\\\":\\\"\\\"+\\\"\" + escapeString($whatsapp.visitorMsgWA1) + \"\\\"+\\\"\\\",\" + \"   \\\"To\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($waDestination) + \"\\\"+\\\"\\\",\" + \"   \\\"NumSegments\\\":\\\"919088772221\\\",\" + \"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" + \"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" + \"   \\\"From\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($whatsapp.sourceWA) + \"\\\"+\\\"\\\",\" + \"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" + \"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" + \"   \\\"num_media\\\":\\\"1\\\"\" + \"}\"+\")\");\n$request_06hjCoSG9W.setBody(JSON.stringify(sanitizedBody));\r\nvar $response_06hjCoSG9W \u003d $request_06hjCoSG9W.submit(\"POST\");\r\n\t var $responseBodyObj_06hjCoSG9W \u003d $response_06hjCoSG9W.getBodyAsString();\r\n\tvar responseType \u003d $response_06hjCoSG9W.getHeader(\"Content-Type\");\r\n\tif (responseType.indexOf(\"json\")!\u003d-1) {\r\n\t\t$responseBodyObj_06hjCoSG9W \u003d JSON.parse($responseBodyObj_06hjCoSG9W);\r\n\t}\r\n\telse if (responseType.indexOf(\"xml\")!\u003d-1) {\r\n\t\t$responseBodyObj_06hjCoSG9W \u003d $responseBodyObj_06hjCoSG9W.replace(/\u003c\\xml.*?\u003e/g, \u0027\u0027).replace(/\\n/g, \u0027\u0027).replace(/\\r/g, \u0027\u0027);\r\n\t\t$responseBodyObj_06hjCoSG9W \u003d new XML(undefined);\r\n\t}\r\n\r\n\t//assertions\r\n\r\n",
        "state": {
          "contentType": "html",
          "request": {
            "method": "POST",
            "url": "$incomingWAURL",
            "parameters": [],
            "headers": [
              [
                "Content-Type",
                "application/json"
              ]
            ],
            "authType": "none",
            "body": "{\n   \"SmsMessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"ProfileName\":\"abc\",\n   \"SmsSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"WaId\":\"91750878281\",\n   \"SmsStatus\":\"received\",\n   \"Body\":\"\"+$whatsapp.visitorMsgWA1+\"\",\n   \"To\":\"whatsapp:+\"+$waDestination+\"\",\n   \"NumSegments\":\"919088772221\",\n   \"ReferralNumMedia\":\"0\",\n   \"MessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"AccountSid\":\"AC00a7b3b1c35de688eb9696b3119e0388\",\n   \"From\":\"whatsapp:+\"+$whatsapp.sourceWA+\"\",\n   \"ApiVersion\":\"2010-04-01\",   \n   \"message_uuid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",       \n   \"num_media\":\"1\"\n}",
            "bodyParams": [],
            "isParametrizedBody": false,
            "resetCookies": false
          },
          "assertions": {
            "status": [],
            "header": [],
            "body": []
          },
          "variables": {
            "status": [],
            "header": [],
            "body": []
          },
          "authInfo": {}
        }
      },
      {
        "commented": true,
        "isRawScript": true,
        "rawScript": "$request \u003d new RESTRequest();\n$request.setURL($incomingWAURL);\n$request.setHeader(\"Content-Type\", \"application/json\");\n//var $file \u003d _readFile(\"D:/jsonfile.txt\");\n//$request.setBody($file);\n\n\n\nvar $x \u003d \"{\" +\n\"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"ProfileName\\\":\\\"abc\\\",\" +\n\"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"WaId\\\":\\\"91750878289\\\",\" +\n\"   \\\"SmsStatus\\\":\\\"received\\\",\" +\n\"  \\\"Body\\\":\\\"\"+$whatsapp.visitorMsgWA1+\"\\\",\" +\n\"   \\\"To\\\":\\\"whatsapp:+\"+$waDestination+\"\\\",\" +\n\"   \\\"NumSegments\\\":\\\"1\\\",\" +\n\"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" +\n\"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" +\n\"   \\\"From\\\":\\\"whatsapp:+\"+$whatsapp.sourceWA+\"\\\",\" +\n\"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" +\n\"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" +\n\"   \\\"num_media\\\":\\\"1\\\"\" +\n\"}\";\n\n_log($x);\n$request.setBody($x);\n\n$response \u003d $request.submit(\"POST\");\nvar $responseBody \u003d $response.getBodyAsString();\n_assertEqual(\"200\", $response.getResponseCode());\n_log($response.getHeader(\u0027Content-Length\u0027));\n_log($responseBody);"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"slds-float_left senderName\", _near(_button(\"All\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "var $visitorMessage1\u003d$whatsapp.visitorMsgWA1;"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"\"+$visitorMessage1+\"\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Equals",
        "secondaryParam": {
          "parameterId": "whatsapp_",
          "attributeId": "attr_41694435048522"
        },
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "2000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textarea(\"messageBody\")"
          },
          {
            "parameterId": "sfagent_",
            "attributeId": "attr_11693489423730"
          }
        ],
        "stepType": "Action",
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"Send\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"close\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "POST"
          },
          {
            "isCustomParameter": true,
            "customValue": "$incomingWAURL"
          }
        ],
        "stepType": "REST",
        "isRawScript": true,
        "rawScript": "var $request_ihAfjFz2AN \u003d new RESTRequest();\r\n$request_ihAfjFz2AN.setURL($incomingWAURL);\r\n$request_ihAfjFz2AN.setHeader(\"Content-Type\", \"application/json\");\r\nvar sanitizedBody \u003d eval(\"(\"+\"{\" + \"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"ProfileName\\\":\\\"abc\\\",\" + \"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"WaId\\\":\\\"91750878281\\\",\" + \"   \\\"SmsStatus\\\":\\\"received\\\",\" + \"   \\\"Body\\\":\\\"\\\"+\\\"\" + escapeString($whatsapp.visitorMsgWA2) + \"\\\"+\\\"\\\",\" + \"   \\\"To\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($waDestination) + \"\\\"+\\\"\\\",\" + \"   \\\"NumSegments\\\":\\\"919088772221\\\",\" + \"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" + \"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" + \"   \\\"From\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($whatsapp.sourceWA) + \"\\\"+\\\"\\\",\" + \"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" + \"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" + \"   \\\"num_media\\\":\\\"1\\\"\" + \"}\"+\")\");\n$request_ihAfjFz2AN.setBody(JSON.stringify(sanitizedBody));\r\nvar $response_ihAfjFz2AN \u003d $request_ihAfjFz2AN.submit(\"POST\");\r\n\t var $responseBodyObj_ihAfjFz2AN \u003d $response_ihAfjFz2AN.getBodyAsString();\r\n\tvar responseType \u003d $response_ihAfjFz2AN.getHeader(\"Content-Type\");\r\n\tif (responseType.indexOf(\"json\")!\u003d-1) {\r\n\t\t$responseBodyObj_ihAfjFz2AN \u003d JSON.parse($responseBodyObj_ihAfjFz2AN);\r\n\t}\r\n\telse if (responseType.indexOf(\"xml\")!\u003d-1) {\r\n\t\t$responseBodyObj_ihAfjFz2AN \u003d $responseBodyObj_ihAfjFz2AN.replace(/\u003c\\xml.*?\u003e/g, \u0027\u0027).replace(/\\n/g, \u0027\u0027).replace(/\\r/g, \u0027\u0027);\r\n\t\t$responseBodyObj_ihAfjFz2AN \u003d new XML(undefined);\r\n\t}\r\n\r\n\t//assertions\r\n\r\n",
        "state": {
          "contentType": "html",
          "request": {
            "method": "POST",
            "url": "$incomingWAURL",
            "parameters": [],
            "headers": [
              [
                "Content-Type",
                "application/json"
              ]
            ],
            "authType": "none",
            "body": "{\n   \"SmsMessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"ProfileName\":\"abc\",\n   \"SmsSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"WaId\":\"91750878281\",\n   \"SmsStatus\":\"received\",\n   \"Body\":\"\"+$whatsapp.visitorMsgWA2+\"\",\n   \"To\":\"whatsapp:+\"+$waDestination+\"\",\n   \"NumSegments\":\"919088772221\",\n   \"ReferralNumMedia\":\"0\",\n   \"MessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"AccountSid\":\"AC00a7b3b1c35de688eb9696b3119e0388\",\n   \"From\":\"whatsapp:+\"+$whatsapp.sourceWA+\"\",\n   \"ApiVersion\":\"2010-04-01\",   \n   \"message_uuid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",       \n   \"num_media\":\"1\"\n}",
            "bodyParams": [],
            "isParametrizedBody": false,
            "resetCookies": false
          },
          "assertions": {
            "status": [],
            "header": [],
            "body": []
          },
          "variables": {
            "status": [],
            "header": [],
            "body": []
          },
          "authInfo": {}
        }
      },
      {
        "commented": true,
        "isRawScript": true,
        "rawScript": "$request \u003d new RESTRequest();\n$request.setURL($incomingWAURL);\n$request.setHeader(\"Content-Type\", \"application/json\");\n//var $file \u003d _readFile(\"D:/jsonfile.txt\");\n//$request.setBody($file);\n\n\n\nvar $x \u003d \"{\" +\n\"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"ProfileName\\\":\\\"abc\\\",\" +\n\"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"WaId\\\":\\\"91750878289\\\",\" +\n\"   \\\"SmsStatus\\\":\\\"received\\\",\" +\n\"  \\\"Body\\\":\\\"\"+$whatsapp.visitorMsgWA2+\"\\\",\" +\n\"   \\\"To\\\":\\\"whatsapp:+\"+$waDestination+\"\\\",\" +\n\"   \\\"NumSegments\\\":\\\"1\\\",\" +\n\"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" +\n\"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" +\n\"   \\\"From\\\":\\\"whatsapp:+\"+$whatsapp.sourceWA+\"\\\",\" +\n\"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" +\n\"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" +\n\"   \\\"num_media\\\":\\\"1\\\"\" +\n\"}\";\n\n_log($x);\n$request.setBody($x);\n\n$response \u003d $request.submit(\"POST\");\nvar $responseBody \u003d $response.getBodyAsString();\n_assertEqual(\"200\", $response.getResponseCode());\n_log($response.getHeader(\u0027Content-Length\u0027));\n_log($responseBody);"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"slds-float_left senderName\", _near(_button(\"All\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "var $visitorMessage2\u003d$whatsapp.visitorMsgWA2;"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"\"+$visitorMessage2+\"\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Equals",
        "secondaryParam": {
          "parameterId": "whatsapp_",
          "attributeId": "attr_51694435285797"
        },
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "2000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textarea(\"messageBody\")"
          },
          {
            "parameterId": "sfagent_",
            "attributeId": "attr_21693566069261"
          }
        ],
        "stepType": "Action",
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"Send\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"close\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "POST"
          },
          {
            "isCustomParameter": true,
            "customValue": "$incomingWAURL"
          }
        ],
        "stepType": "REST",
        "isRawScript": true,
        "rawScript": "var $request_JvoKfSbwDj \u003d new RESTRequest();\r\n$request_JvoKfSbwDj.setURL($incomingWAURL);\r\n$request_JvoKfSbwDj.setHeader(\"Content-Type\", \"application/json\");\r\nvar sanitizedBody \u003d eval(\"(\"+\"{\" + \"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"ProfileName\\\":\\\"abc\\\",\" + \"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"WaId\\\":\\\"91750878281\\\",\" + \"   \\\"SmsStatus\\\":\\\"received\\\",\" + \"   \\\"Body\\\":\\\"\\\"+\\\"\" + escapeString($whatsapp.visitorMsgWA3) + \"\\\"+\\\"\\\",\" + \"   \\\"To\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($waDestination) + \"\\\"+\\\"\\\",\" + \"   \\\"NumSegments\\\":\\\"919088772221\\\",\" + \"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" + \"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" + \"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" + \"   \\\"From\\\":\\\"whatsapp:+\\\"+\\\"\" + escapeString($whatsapp.sourceWA) + \"\\\"+\\\"\\\",\" + \"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" + \"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" + \"   \\\"num_media\\\":\\\"1\\\"\" + \"}\"+\")\");\n$request_JvoKfSbwDj.setBody(JSON.stringify(sanitizedBody));\r\nvar $response_JvoKfSbwDj \u003d $request_JvoKfSbwDj.submit(\"POST\");\r\n\t var $responseBodyObj_JvoKfSbwDj \u003d $response_JvoKfSbwDj.getBodyAsString();\r\n\tvar responseType \u003d $response_JvoKfSbwDj.getHeader(\"Content-Type\");\r\n\tif (responseType.indexOf(\"json\")!\u003d-1) {\r\n\t\t$responseBodyObj_JvoKfSbwDj \u003d JSON.parse($responseBodyObj_JvoKfSbwDj);\r\n\t}\r\n\telse if (responseType.indexOf(\"xml\")!\u003d-1) {\r\n\t\t$responseBodyObj_JvoKfSbwDj \u003d $responseBodyObj_JvoKfSbwDj.replace(/\u003c\\xml.*?\u003e/g, \u0027\u0027).replace(/\\n/g, \u0027\u0027).replace(/\\r/g, \u0027\u0027);\r\n\t\t$responseBodyObj_JvoKfSbwDj \u003d new XML(undefined);\r\n\t}\r\n\r\n\t//assertions\r\n\r\n",
        "state": {
          "contentType": "html",
          "request": {
            "method": "POST",
            "url": "$incomingWAURL",
            "parameters": [],
            "headers": [
              [
                "Content-Type",
                "application/json"
              ]
            ],
            "authType": "none",
            "body": "{\n   \"SmsMessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"ProfileName\":\"abc\",\n   \"SmsSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"WaId\":\"91750878281\",\n   \"SmsStatus\":\"received\",\n   \"Body\":\"\"+$whatsapp.visitorMsgWA3+\"\",\n   \"To\":\"whatsapp:+\"+$waDestination+\"\",\n   \"NumSegments\":\"919088772221\",\n   \"ReferralNumMedia\":\"0\",\n   \"MessageSid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",\n   \"AccountSid\":\"AC00a7b3b1c35de688eb9696b3119e0388\",\n   \"From\":\"whatsapp:+\"+$whatsapp.sourceWA+\"\",\n   \"ApiVersion\":\"2010-04-01\",   \n   \"message_uuid\":\"SM91805a30f08ed4a44c8fe7b1264deb14\",       \n   \"num_media\":\"1\"\n}",
            "bodyParams": [],
            "isParametrizedBody": false,
            "resetCookies": false
          },
          "assertions": {
            "status": [],
            "header": [],
            "body": []
          },
          "variables": {
            "status": [],
            "header": [],
            "body": []
          },
          "authInfo": {}
        }
      },
      {
        "commented": true,
        "isRawScript": true,
        "rawScript": "$request \u003d new RESTRequest();\n$request.setURL($incomingWAURL);\n$request.setHeader(\"Content-Type\", \"application/json\");\n//var $file \u003d _readFile(\"D:/jsonfile.txt\");\n//$request.setBody($file);\n\n\n\nvar $x \u003d \"{\" +\n\"   \\\"SmsMessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"ProfileName\\\":\\\"abc\\\",\" +\n\"   \\\"SmsSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"WaId\\\":\\\"91750878289\\\",\" +\n\"   \\\"SmsStatus\\\":\\\"received\\\",\" +\n\"  \\\"Body\\\":\\\"\"+$whatsapp.visitorMsgWA3+\"\\\",\" +\n\"   \\\"To\\\":\\\"whatsapp:+\"+$waDestination+\"\\\",\" +\n\"   \\\"NumSegments\\\":\\\"1\\\",\" +\n\"   \\\"ReferralNumMedia\\\":\\\"0\\\",\" +\n\"   \\\"MessageSid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",\" +\n\"   \\\"AccountSid\\\":\\\"AC00a7b3b1c35de688eb9696b3119e0388\\\",\" +\n\"   \\\"From\\\":\\\"whatsapp:+\"+$whatsapp.sourceWA+\"\\\",\" +\n\"   \\\"ApiVersion\\\":\\\"2010-04-01\\\",   \" +\n\"   \\\"message_uuid\\\":\\\"SM91805a30f08ed4a44c8fe7b1264deb14\\\",       \" +\n\"   \\\"num_media\\\":\\\"1\\\"\" +\n\"}\";\n\n_log($x);\n$request.setBody($x);\n\n$response \u003d $request.submit(\"POST\");\nvar $responseBody \u003d $response.getBodyAsString();\n_assertEqual(\"200\", $response.getResponseCode());\n_log($response.getHeader(\u0027Content-Length\u0027));\n_log($responseBody);"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"slds-float_left senderName\", _near(_button(\"All\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "var $visitorMessage3\u003d$whatsapp.visitorMsgWA3;"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"\"+$visitorMessage3+\"\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Equals",
        "secondaryParam": {
          "parameterId": "whatsapp_",
          "attributeId": "attr_61694435505852"
        },
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "2000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textarea(\"messageBody\")"
          },
          {
            "parameterId": "sfagent_",
            "attributeId": "attr_31706079911397"
          }
        ],
        "stepType": "Action",
        "visibleCheck": false
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"Send\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(\"close\")"
          }
        ],
        "stepType": "Action"
      }
    ]
  },
  "enabled": false,
  "parentId": ""
}