{
  "modifiedOn": "2024-07-31T12:45:04.525Z",
  "name": "Refresh Sandbox Org Not Connected to Production $expirydate",
  "id": "58593",
  "type": 3,
  "createdOn": "2024-07-31T07:11:47.585Z",
  "content": {
    "isSystemKeyword": false,
    "title": "Refresh Sandbox Org Not Connected to Production $expirydate",
    "parameters": [
      {
        "parameterId": "expirydate_",
        "entityTypeId": "expirydate",
        "suffix": ""
      }
    ],
    "steps": [
      {
        "commented": true,
        "isRawScript": true,
        "rawScript": "//To get Todays Date\n\n$today \u003d new Date();\n_log($today);\n\n$year \u003d $today.getFullYear();\n$month \u003d String($today.getMonth() + 1).padStart(2, \u00270\u0027); \n$day \u003d String($today.getDate()).padStart(2, \u00270\u0027);\n\n$todaysFormattedDate \u003d `${$year}-${$month}-${$day}`;\n_log($todaysFormattedDate);\n\n//To get Extended Expiry Date\n\n$futureDate \u003d new Date($today);\n$futureDate.setDate($today.getDate() + 15);\n\n$year \u003d $futureDate.getFullYear();\n$month \u003d String($futureDate.getMonth() + 1).padStart(2, \u00270\u0027);\n$day \u003d String($futureDate.getDate()).padStart(2, \u00270\u0027);\n\n$extendedDate \u003d `${$year}-${$month}-${$day}`;\n\n_log($extendedDate);\n"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "$today\u003dnew Date();\n$formatter \u003d new java.text.SimpleDateFormat(\"yyyy-MM-dd\");\n$todaysFormattedDate \u003d $formatter.format($today);\n//To get Extended Expiry Date\n$futureDate \u003d new Date($today);\n$futureDate.setDate($today.getDate() + 15);\n$extendedDate\u003d$formatter.format($futureDate);"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "$expiryDate \u003d  new Date($sfSandboxExpiryDate);\n$today \u003d new Date();\n\n$diff \u003d$expiryDate-$today;\n\n_log($diff);\n\nif ($diff\u003e\u003d0) {\n _log(\"Sandbox is Active\");"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/https://qa-app.txtbox.in/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(0, _near(_submit(\"View Details\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_link(\"connect to the new refreshed org\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_submit(\"Connect\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/Salesforce/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_emailbox(\"username\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sandboxUsername"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_password(\"pw\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sandboxPassword"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_submit(\"Log In to Sandbox\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "10000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/Portal SMS Magic/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_isVisible",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_heading2(\"Workspace\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Is_True"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/https://qa-ops.txtbox.in/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textbox(\"accountToSearch\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$accountId"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"fa fa-search menu ms-2\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"Product Plan Details\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_cell(1, _near(_tableHeader(\"Expiry\")))"
          }
        ],
        "stepType": "Store",
        "secondaryParam": {
          "isCustomParameter": true,
          "customValue": "$sfSandboxExpiryNew"
        }
      },
      {
        "commented": false,
        "action": "_areEqual",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "$sfSandboxExpiryNew"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sfSandboxExpiry"
          }
        ],
        "stepType": "Assert",
        "assertType": "Is_True"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "}else{\n_log(\"Sandbox is Expired\");"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/https://qa-app.txtbox.in/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_button(0, _near(_submit(\"View Details\")))"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "3000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_link(\"connect to the new refreshed org\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_submit(\"Connect\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/Salesforce/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_emailbox(\"username\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sandboxUsername"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_password(\"pw\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sandboxPassword"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_submit(\"Log In to Sandbox\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "10000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/Portal SMS Magic/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_isVisible",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_heading2(\"Workspace\")"
          }
        ],
        "stepType": "Assert",
        "assertType": "Is_True"
      },
      {
        "commented": false,
        "action": "_selectWindow",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "\"/https://qa-ops.txtbox.in/\""
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "5000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_setValue",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_textbox(\"accountToSearch\")"
          },
          {
            "isCustomParameter": true,
            "customValue": "$accountId"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_span(\"fa fa-search menu ms-2\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_click",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_div(\"Product Plan Details\")"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_cell(1, _near(_tableHeader(\"Expiry\")))"
          }
        ],
        "stepType": "Store",
        "secondaryParam": {
          "isCustomParameter": true,
          "customValue": "$sfSandboxExpiryNew"
        }
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "$dateTime \u003d new Date($sfSandboxExpiryNew.replace(\u0027 \u0027, \u0027T\u0027));\n\n$sfSandboxExpiryNewFormatted \u003d $dateTime.toISOString().split(\u0027T\u0027)[0];\n\n_log($sfSandboxExpiryNewFormatted);"
      },
      {
        "commented": false,
        "action": "_areEqual",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "$extendedDate"
          },
          {
            "isCustomParameter": true,
            "customValue": "$sfSandboxExpiryNewFormatted"
          }
        ],
        "stepType": "Assert",
        "assertType": "Is_True"
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "}"
      }
    ]
  },
  "enabled": false,
  "parentId": ""
}