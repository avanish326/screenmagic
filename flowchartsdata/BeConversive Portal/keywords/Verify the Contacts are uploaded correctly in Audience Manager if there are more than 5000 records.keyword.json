{
  "modifiedOn": "2024-05-23T14:29:30.688Z",
  "name": "Verify the Contacts are uploaded correctly in Audience Manager if there are more than 5000 records",
  "id": "46284",
  "type": 3,
  "createdOn": "2024-05-23T13:49:24.856Z",
  "content": {
    "isSystemKeyword": false,
    "title": "Verify the Contacts are uploaded correctly in Audience Manager if there are more than 5000 records",
    "parameters": [],
    "steps": [
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "250000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": false,
        "action": "_call",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "location.reload()"
          }
        ],
        "stepType": "Store",
        "secondaryParam": {}
      },
      {
        "commented": false,
        "action": "_wait",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "7000"
          }
        ],
        "stepType": "Action"
      },
      {
        "commented": true,
        "action": "_getText",
        "stepParameters": [
          {
            "isCustomParameter": true,
            "customValue": "_paragraph(0, _rightOf(_heading3(\"Contacts\")))"
          }
        ],
        "stepType": "Assert",
        "assertType": "Equals",
        "secondaryParam": {
          "isCustomParameter": true,
          "customValue": "\"Contacts uploaded successfully\""
        }
      },
      {
        "commented": false,
        "isRawScript": true,
        "rawScript": "var $userinfo\u003d _readCSVFile($path, {includeHeader:true});\nvar $userinfo1\u003d _readCSVFile($path);\n\n$headers\u003d$userinfo[0];\n\nvar $firstNameIndex \u003d $headers.indexOf($headers[0]);\nvar $lastNameIndex \u003d $headers.indexOf($headers[1]);\nvar $lastNameIndex \u003d $headers.indexOf($headers[1]);\nvar $phoneIndex \u003d $headers.indexOf($headers[2]);\nvar $addressIndex \u003d $headers.indexOf($headers[3]);\nvar $emailIndex \u003d $headers.indexOf($headers[4]);\n\nvar $len \u003d $userinfo.length-1\n\n\nif($len\u003e10){\n_selectWindow();\n_focusWindow()\n_click(_div(\"select-dropdown-indicator\"))\n_click(_div(\"50 / page\"))\n}\n\nvar $pagesNum \u003d Math.ceil($len/50);\n\nvar $firstNameUI \u003d[];\nvar $lastNameUI\u003d[];\nvar $phoneUI\u003d[];\nvar $addressUI\u003d[];\nvar $emailUI\u003d[];\n\nfor(var $i \u003d 0; $i\u003c$pagesNum; $i++){\nvar $firstName \u003d _collectAttributes(\"_cell\",\"/.*/\",\"sahiText\",_under(_tableHeader(\"First Name\")));\n\nfor(var $j\u003d0;$j\u003c$firstName.length;$j++){\nif($firstName[$j] \u003d\u003d \"-\"){\n$firstNameUI.push(\"\");\n}\n\nelse{\n$firstNameUI.push($firstName[$j]);\n}\n}\n\nvar $lastName \u003d _collectAttributes(\"_cell\",\"/.*/\",\"sahiText\",_under(_tableHeader(\"Last Name\")))\n\nfor(var $j\u003d0;$j\u003c$lastName.length;$j++){\nif($lastName[$j] \u003d\u003d \"-\"){\n$lastNameUI.push(\"\");\n}\n\nelse{\n$lastNameUI.push($lastName[$j]);\n}\n}\n\nvar $phone \u003d _collectAttributes(\"_cell\",\"/.*/\",\"sahiText\",_under(_tableHeader(\"Mobile Number\")))\n\nfor(var $j\u003d0;$j\u003c$phone.length;$j++){\nif($phone[$j] \u003d\u003d \"-\"){\n$phoneUI.push(\"\");\n}\n\nelse{\n$phoneUI.push($phone[$j]);\n}\n}\n\nvar $address \u003d _collectAttributes(\"_cell\",\"/.*/\",\"sahiText\",_under(_tableHeader(\"Address\")))\n\nfor(var $j\u003d0;$j\u003c$address.length;$j++){\nif($address[$j] \u003d\u003d \"-\"){\n$addressUI.push(\"\");\n}\n\nelse{\n$addressUI.push($address[$j]);\n}\n}\n\nvar $email \u003d _collectAttributes(\"_cell\",\"/.*/\",\"sahiText\",_under(_tableHeader(\"Email\")))\n\nfor(var $j\u003d0;$j\u003c$email.length;$j++){\nif($email[$j] \u003d\u003d \"-\"){\n$emailUI.push(\"\");\n}\n\nelse{\n$emailUI.push($email[$j]);\n}\n}\n\n_click(_span(\"/next/\"));\n}\n\n$firstNameUIupdate \u003d $firstNameUI.slice(0,$userinfo.length-1).reverse();\n$lastNameUIupdate \u003d $lastNameUI.slice(0,$userinfo.length-1).reverse();\n$phoneUIupdate \u003d $phoneUI.slice(0,$userinfo.length-1).reverse();\n$addressUIupdate \u003d $addressUI.slice(0,$userinfo.length-1).reverse();\n$emailUIupdate \u003d $emailUI.slice(0,$userinfo.length-1).reverse();\n_log($lastNameUIupdate);\n\n\nfor(var $i \u003d0; $i\u003c$userinfo1.length;$i++){\n_assertEqual($userinfo1[$i][$firstNameIndex],$firstNameUIupdate[$i]);\n_assertEqual($userinfo1[$i][$lastNameIndex],$lastNameUIupdate[$i]);\n_assertEqual($userinfo1[$i][$phoneIndex],$phoneUIupdate[$i]);\n_assertEqual($userinfo1[$i][$addressIndex],$addressUIupdate[$i]);\n_assertEqual($userinfo1[$i][$emailIndex],$emailUIupdate[$i]);\n}\n"
      }
    ]
  },
  "enabled": false,
  "parentId": ""
}